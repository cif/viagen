<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Viagen is a Vite plugin that embeds Claude Code into any Vite dev server. Chat with Claude to build, edit, and fix your app in real time.">
  <title>viagen — Claude Code in your Vite dev server</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #09090b;
      color: #e4e4e7;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    a { color: #a1a1aa; text-decoration: none; transition: color 0.15s; }
    a:hover { color: #e4e4e7; }
    .container { max-width: 640px; width: 100%; padding: 80px 24px 48px; }
    h1 {
      font-family: ui-monospace, monospace;
      font-size: 32px;
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 12px;
    }
    .tagline {
      font-size: 18px;
      color: #a1a1aa;
      line-height: 1.6;
      margin-bottom: 40px;
    }
    .install {
      background: #18181b;
      border: 1px solid #27272a;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .install code {
      font-family: ui-monospace, monospace;
      font-size: 14px;
      color: #d4d4d8;
    }
    .install button {
      background: none;
      border: 1px solid #3f3f46;
      color: #71717a;
      border-radius: 5px;
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
      font-family: inherit;
      transition: border-color 0.15s, color 0.15s;
    }
    .install button:hover { border-color: #52525b; color: #e4e4e7; }
    section { margin-bottom: 36px; }
    h2 {
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #71717a;
      margin-bottom: 12px;
    }
    pre {
      background: #18181b;
      border: 1px solid #27272a;
      border-radius: 8px;
      padding: 16px 20px;
      overflow-x: auto;
    }
    pre code {
      font-family: ui-monospace, monospace;
      font-size: 13px;
      line-height: 1.7;
      color: #a1a1aa;
    }
    .features {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .feature {
      background: #18181b;
      border: 1px solid #27272a;
      border-radius: 8px;
      padding: 16px;
    }
    .feature h3 {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #d4d4d8;
    }
    .feature p {
      font-size: 12px;
      color: #71717a;
      line-height: 1.5;
    }
    .links {
      display: flex;
      gap: 20px;
      margin-top: 48px;
      padding-top: 24px;
      border-top: 1px solid #27272a;
      font-size: 13px;
    }
    @media (max-width: 480px) {
      .features { grid-template-columns: 1fr; }
      .container { padding: 48px 16px 32px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>viagen</h1>
    <p class="tagline">A Vite plugin and cli tool to develop with Claude Code in a sandbox. Chat with Claude to build, edit, and fix your app in real time.</p>

    <div class="install">
      <code>npm install viagen</code>
      <button onclick="navigator.clipboard.writeText('npm install viagen').then(()=>{this.textContent='Copied!';setTimeout(()=>this.textContent='Copy',1500)})">Copy</button>
    </div>

    <section>
      <h2>Add viagen to your app</h2>
      <pre><code>// vite.config.ts
import { defineConfig } from 'vite'
import { viagen } from 'viagen'

export default defineConfig({
  plugins: [viagen()],
})

// Set up API keys, GitHub, and Vercel:
// npx viagen setup
// npm run dev</code></pre>
    </section>

    <section>
      <h2>Features</h2>
      <div class="features">
        <div class="feature">
          <h3>Sandbox</h3>
          <p>Deploy to a remote Vercel Sandbox with one command. Token-based auth on all endpoints.</p>
        </div>
        <div class="feature">
          <h3>Zero config</h3>
          <p>One plugin, one env var. No framework dependency — works with any Vite project.</p>
        </div>
        <div class="feature">
          <h3>Chat panel</h3>
          <p>Built-in chat UI injected into your page. Ask Claude to build features, fix bugs, refactor code.</p>
        </div>
        <div class="feature">
          <h3>Error overlay</h3>
          <p>"Fix This Error" button on Vite's error overlay. One click and Claude starts fixing.</p>
        </div>
        <div class="feature">
          <h3>Full tool access</h3>
          <p>Claude can read, write, edit files, run commands, and search your codebase.</p>
        </div>
        <div class="feature">
          <h3>Git integration</h3>
          <p>Sandbox clones your repo with push access. Claude can commit and push — hit Publish in the chat UI.</p>
        </div>
      </div>
    </section>

    <section>
      <h2>CLI</h2>
      <pre><code># Set up API keys, GitHub, and Vercel tokens
npx viagen setup

# See all commands and env vars
npx viagen help

# Deploy to a remote Vercel Sandbox
npx viagen sandbox

# Stop a running sandbox
npx viagen sandbox stop &lt;sandboxId&gt;</code></pre>
    </section>

    <section>
      <h2>Setup</h2>
      <p style="font-size:13px;color:#a1a1aa;line-height:1.6;margin-bottom:12px;">The <code style="font-family:ui-monospace,monospace;color:#d4d4d8;">npx viagen setup</code> command walks you through configuring your environment. You'll need:</p>
      <ul style="font-size:13px;color:#a1a1aa;line-height:1.8;margin-bottom:12px;padding-left:20px;">
        <li>Claude account — get your API key from <a href="https://console.anthropic.com">console.anthropic.com</a></li>
        <li>Vercel account — for deploying sandboxes (free tier works)</li>
        <li>Git account — GitHub token for git integration (optional)</li>
      </ul>
      <div class="install">
        <code>npx viagen setup</code>
        <button onclick="navigator.clipboard.writeText('npx viagen setup').then(()=>{this.textContent='Copied!';setTimeout(()=>this.textContent='Copy',1500)})">Copy</button>
      </div>
    </section>

    <section>
      <h2>Sandbox</h2>
      <p style="font-size:13px;color:#a1a1aa;line-height:1.6;margin-bottom:12px;">Deploy your dev server to a remote Vercel Sandbox — an isolated microVM with full tool access and token-based auth on every endpoint.</p>
      <pre><code># 1. Set up Vercel auth (pick one):
vercel link && vercel env pull
# or set VERCEL_TOKEN, VERCEL_TEAM_ID, VERCEL_PROJECT_ID

# 2. Optional: enable git push from sandbox
# Set GITHUB_TOKEN in .env (or use `gh auth token`)

# 3. Deploy
npx viagen sandbox
# Detects git repo, prompts for mode if dirty tree,
# clones into sandbox with push access</code></pre>
    </section>

    <section>
      <h2>Git integration</h2>
      <p style="font-size:13px;color:#a1a1aa;line-height:1.6;margin-bottom:12px;">When a GITHUB_TOKEN is set, the sandbox clones your repo instead of uploading files. Claude gets full git history and can commit and push changes back to your remote.</p>
      <pre><code># Add to .env (easiest: use your gh CLI token)
GITHUB_TOKEN=$(gh auth token)

# The CLI auto-detects from your local repo:
#   - Remote URL (SSH remotes converted to HTTPS)
#   - Current branch
#   - Git user name and email

# If you have uncommitted changes, you'll be prompted:
#   1) Clone from remote (clean)
#   2) Upload local files (no git)
#   3) Clone + overlay your local changes (default)

# In the chat UI, hit "Publish" to commit + push</code></pre>
    </section>

    <section>
      <h2>Options</h2>
      <pre><code>viagen({
  position: 'bottom-right',  // toggle button position
  model: 'sonnet',           // claude model
  panelWidth: 420,           // chat panel width in px
  overlay: true,             // fix button on error overlay
  ui: true,                  // inject chat panel into pages
})</code></pre>
    </section>

    <section>
      <h2>API</h2>
      <pre><code>POST /via/chat        — send a message, streamed SSE response
POST /via/chat/reset  — clear conversation history
GET  /via/health      — check API key status
GET  /via/error       — latest build error (if any)
GET  /via/ui          — standalone chat interface</code></pre>
    </section>

    <div class="links">
      <a href="https://github.com/anthropics/viagen">GitHub</a>
      <a href="https://www.npmjs.com/package/viagen">npm</a>
    </div>
  </div>
</body>
</html>
